import pandas as pd
import matplotlib.pyplot as plt
import seaborn as sns

# Load the CSV
df = pd.read_csv("climate_vulnerability.csv")
df.columns = df.columns.str.strip()  # Remove any extra spaces

# Convert scores to numeric
df["Overall Vulnerability Index Score"] = pd.to_numeric(df["Overall Vulnerability Index Score"], errors="coerce")

# Sort data
df_sorted = df.sort_values(by="Overall Vulnerability Index Score", ascending=True)

# Set figure size & style
plt.figure(figsize=(12, 7))
sns.set_style("whitegrid")

# Create bar plot with gradient colors
colors = sns.color_palette("Reds", len(df_sorted))
bars = plt.barh(df_sorted["State"], df_sorted["Overall Vulnerability Index Score"], color=colors)

# Add values on bars
for bar, value in zip(bars, df_sorted["Overall Vulnerability Index Score"]):
    plt.text(value + 0.01, bar.get_y() + bar.get_height()/2, f"{value:.2f}", va='center', fontsize=10, color="black")

# Customize title & labels
plt.xlabel("Climate Vulnerability Index Score", fontsize=12, fontweight="bold")
plt.ylabel("State", fontsize=12, fontweight="bold")
plt.title("ðŸ”¥ Climate Vulnerability Index by State (CEEW) ðŸ”¥", fontsize=14, fontweight="bold")

# Improve layout
plt.gca().invert_yaxis()  # Keep highest risk states on top
plt.tight_layout()

# Show graph
plt.show()
